<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sjw.blog.dao.ArticleDao">

	<sql id="article_table_all_columns">
		article_id,
		article_user_id,
		article_title,
		article_content,
		article_parent_category_id,
		article_child_category_id,
		article_tag_ids,
		article_view_count,
		article_comment_count,
		article_like_count,
		article_post_time,
		article_update_time,
		article_is_comment,
		article_status,
		article_order
	</sql>

	<!--获取文章总数 -->
	<select id="countArticle" resultType="Integer">
		SELECT COUNT(*) FROM `article`
		<where>
			<if test="status!=null">
				article_status=#{status}
			</if>
		</where>
	</select>

	<!--通过分页查询文章 -->
	<select id="getArticleByPage" resultType="com.sjw.blog.entity.Article">
		SELECT
		<include refid="article_table_all_columns" />
		FROM `article`
		<where>
			<if test="status!=null">
				article_status=#{status}
			</if>
		</where>
		ORDER BY article_status ASC, article_order DESC, article_id DESC
		limit #{startPos},#{pageSize}
	</select>

</mapper>